import{d as z,r as _,a as U,c as h,e,w as t,f as n,o as b,g as d,t as A,j as I,z as J,F as P,m as G,E as g,J as N}from"./index-CEiZuroB.js";const H={class:"system-user"},W=z({__name:"user",setup(K){const i=_(!1),p=_(!1),w=_(),v=U({username:"",status:""}),o=U({id:"",username:"",name:"",password:"",phone:"",email:"",roleId:"",status:"active"}),$={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},E=_([{id:"1",name:"超级管理员"},{id:"2",name:"调度员"},{id:"3",name:"财务"},{id:"4",name:"统计员"}]),q=_([{id:"1",username:"admin",name:"管理员",phone:"13800138000",email:"admin@example.com",roleId:"1",roleName:"超级管理员",status:"active",lastLoginTime:"2024-12-23 10:30"},{id:"2",username:"dispatcher",name:"张调度",phone:"13800138001",email:"dispatcher@example.com",roleId:"2",roleName:"调度员",status:"active",lastLoginTime:"2024-12-23 09:15"},{id:"3",username:"finance",name:"李财务",phone:"13800138002",email:"finance@example.com",roleId:"3",roleName:"财务",status:"active",lastLoginTime:"2024-12-22 16:45"}]),L=()=>{p.value=!1,Object.assign(o,{id:"",username:"",name:"",password:"",phone:"",email:"",roleId:"",status:"active"}),i.value=!0},T=r=>{p.value=!0,Object.assign(o,r),i.value=!0},j=async()=>{await w.value?.validate(),g.success(p.value?"修改成功":"创建成功"),i.value=!1},B=r=>{g.success(`已${r.status==="active"?"启用":"禁用"}`)},D=async r=>{await N.confirm(`确定重置${r.name}的密码吗？`,"提示"),g.success("密码已重置为123456")},R=async r=>{await N.confirm("确定删除该用户吗？","提示"),g.success("删除成功")};return(r,l)=>{const f=n("el-input"),s=n("el-form-item"),V=n("el-option"),y=n("el-select"),u=n("el-button"),k=n("el-form"),C=n("el-card"),m=n("el-table-column"),S=n("el-tag"),x=n("el-switch"),F=n("el-table"),M=n("el-pagination"),O=n("el-dialog");return b(),h("div",H,[e(C,{shadow:"never"},{default:t(()=>[e(k,{model:v,inline:""},{default:t(()=>[e(s,{label:"用户名"},{default:t(()=>[e(f,{modelValue:v.username,"onUpdate:modelValue":l[0]||(l[0]=a=>v.username=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:t(()=>[e(y,{modelValue:v.status,"onUpdate:modelValue":l[1]||(l[1]=a=>v.status=a),placeholder:"请选择",clearable:""},{default:t(()=>[e(V,{label:"正常",value:"active"}),e(V,{label:"禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(u,{type:"primary"},{default:t(()=>[...l[11]||(l[11]=[d("查询",-1)])]),_:1}),e(u,null,{default:t(()=>[...l[12]||(l[12]=[d("重置",-1)])]),_:1}),e(u,{type:"primary",onClick:L},{default:t(()=>[...l[13]||(l[13]=[d("新增用户",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{shadow:"never",style:{"margin-top":"16px"}},{default:t(()=>[e(F,{data:q.value,stripe:""},{default:t(()=>[e(m,{prop:"username",label:"用户名",width:"120"}),e(m,{prop:"name",label:"姓名",width:"100"}),e(m,{prop:"phone",label:"手机号",width:"130"}),e(m,{prop:"email",label:"邮箱","min-width":"180"}),e(m,{prop:"roleName",label:"角色",width:"120"},{default:t(({row:a})=>[e(S,null,{default:t(()=>[d(A(a.roleName),1)]),_:2},1024)]),_:1}),e(m,{prop:"status",label:"状态",width:"80"},{default:t(({row:a})=>[e(x,{modelValue:a.status,"onUpdate:modelValue":c=>a.status=c,"active-value":"active","inactive-value":"disabled",onChange:c=>B(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(m,{prop:"lastLoginTime",label:"最后登录",width:"180"}),e(m,{label:"操作",width:"180",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:c=>T(a)},{default:t(()=>[...l[14]||(l[14]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"primary",onClick:c=>D(a)},{default:t(()=>[...l[15]||(l[15]=[d("重置密码",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"danger",onClick:c=>R(a)},{default:t(()=>[...l[16]||(l[16]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(M,{style:{"margin-top":"16px","justify-content":"flex-end"},total:30,layout:"total, prev, pager, next"})]),_:1}),e(O,{modelValue:i.value,"onUpdate:modelValue":l[10]||(l[10]=a=>i.value=a),title:p.value?"编辑用户":"新增用户",width:"500"},{footer:t(()=>[e(u,{onClick:l[9]||(l[9]=a=>i.value=!1)},{default:t(()=>[...l[17]||(l[17]=[d("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:j},{default:t(()=>[...l[18]||(l[18]=[d("确定",-1)])]),_:1})]),default:t(()=>[e(k,{model:o,rules:$,ref_key:"formRef",ref:w,"label-width":"80px"},{default:t(()=>[e(s,{label:"用户名",prop:"username"},{default:t(()=>[e(f,{modelValue:o.username,"onUpdate:modelValue":l[2]||(l[2]=a=>o.username=a),placeholder:"请输入用户名",disabled:p.value},null,8,["modelValue","disabled"])]),_:1}),e(s,{label:"姓名",prop:"name"},{default:t(()=>[e(f,{modelValue:o.name,"onUpdate:modelValue":l[3]||(l[3]=a=>o.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),p.value?J("",!0):(b(),I(s,{key:0,label:"密码",prop:"password"},{default:t(()=>[e(f,{modelValue:o.password,"onUpdate:modelValue":l[4]||(l[4]=a=>o.password=a),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})),e(s,{label:"手机号",prop:"phone"},{default:t(()=>[e(f,{modelValue:o.phone,"onUpdate:modelValue":l[5]||(l[5]=a=>o.phone=a),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(s,{label:"邮箱"},{default:t(()=>[e(f,{modelValue:o.email,"onUpdate:modelValue":l[6]||(l[6]=a=>o.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(s,{label:"角色",prop:"roleId"},{default:t(()=>[e(y,{modelValue:o.roleId,"onUpdate:modelValue":l[7]||(l[7]=a=>o.roleId=a),placeholder:"请选择角色",style:{width:"100%"}},{default:t(()=>[(b(!0),h(P,null,G(E.value,a=>(b(),I(V,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:t(()=>[e(x,{modelValue:o.status,"onUpdate:modelValue":l[8]||(l[8]=a=>o.status=a),"active-value":"active","inactive-value":"disabled"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{W as default};
