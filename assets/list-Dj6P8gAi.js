import{p as ne}from"./index-DFr7TxOb.js";import{d as de,r as c,a as U,c as j,e,w as t,f as n,o as L,g as d,k as se,D as ue,j as F,t as y,b as O,A as re,F as ie,m as pe,l as me,E as V,J as fe,_ as ce}from"./index-CEiZuroB.js";const ve={class:"customer-list"},_e={style:{"margin-left":"8px",color:"#909399"}},ge=de({__name:"list",setup(be){const R=c(!1),v=c(!1),_=c(!1),N=c(!1),x=c(!1),E=c(),r=U({name:"",type:"",status:""}),g=U({page:1,size:10,total:50}),T=ne,o=U({id:"",name:"",shortName:"",type:"company",priceType:"standard",contact:"",phone:"",address:"",creditLimit:0,status:"active",remark:""}),z=U({}),A={name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],type:[{required:!0,message:"请选择客户类型",trigger:"change"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}]},M=c([{id:"1",name:"郑州市某建筑工程有限公司",shortName:"某建筑",type:"company",contact:"张经理",phone:"13800138000",address:"郑州市金水区xxx路xxx号",creditLimit:5e5,balance:12e4,status:"active"},{id:"2",name:"河南某混凝土有限公司",shortName:"某混凝土",type:"company",contact:"李经理",phone:"13800138001",address:"郑州市中原区xxx路xxx号",creditLimit:1e6,balance:-5e4,status:"active"},{id:"3",name:"某工程公司",shortName:"某工程",type:"company",contact:"王经理",phone:"13800138002",address:"郑州市二七区xxx路",creditLimit:3e5,balance:8e4,status:"active"}]),I=()=>{V.info("查询")},J=()=>{r.name="",r.type="",r.status=""},G=()=>{},H=()=>{},K=()=>{x.value=!1,Object.assign(o,{id:"",name:"",shortName:"",type:"company",priceType:"standard",contact:"",phone:"",address:"",creditLimit:0,status:"active",remark:""}),v.value=!0},Q=m=>{x.value=!0,Object.assign(o,m),v.value=!0},W=async()=>{await E.value?.validate(),N.value=!0,setTimeout(()=>{V.success(x.value?"修改成功":"创建成功"),v.value=!1,N.value=!1},500)},X=m=>{T.forEach(l=>{z[l.value]=m.contractPrice?.[l.value]||l.price}),_.value=!0},Y=()=>{V.success("保存成功"),_.value=!1},Z=m=>{V.info(`查看${m.name}账单`)},ee=async m=>{await fe.confirm("确定删除该客户吗？","提示"),V.success("删除成功")};return(m,l)=>{const f=n("el-input"),s=n("el-form-item"),k=n("el-option"),$=n("el-select"),u=n("el-button"),S=n("el-form"),q=n("el-card"),i=n("el-table-column"),B=n("el-tag"),le=n("el-table"),te=n("el-pagination"),p=n("el-col"),w=n("el-row"),C=n("el-radio"),D=n("el-radio-group"),h=n("el-input-number"),ae=n("el-switch"),P=n("el-dialog"),oe=ue("loading");return L(),j("div",ve,[e(q,{shadow:"never"},{default:t(()=>[e(S,{model:r,inline:""},{default:t(()=>[e(s,{label:"客户名称"},{default:t(()=>[e(f,{modelValue:r.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r.name=a),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"类型"},{default:t(()=>[e($,{modelValue:r.type,"onUpdate:modelValue":l[1]||(l[1]=a=>r.type=a),placeholder:"请选择",clearable:""},{default:t(()=>[e(k,{label:"企业客户",value:"company"}),e(k,{label:"个人客户",value:"personal"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:t(()=>[e($,{modelValue:r.status,"onUpdate:modelValue":l[2]||(l[2]=a=>r.status=a),placeholder:"请选择",clearable:""},{default:t(()=>[e(k,{label:"正常",value:"active"}),e(k,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(u,{type:"primary",onClick:I},{default:t(()=>[...l[19]||(l[19]=[d("查询",-1)])]),_:1}),e(u,{onClick:J},{default:t(()=>[...l[20]||(l[20]=[d("重置",-1)])]),_:1}),e(u,{type:"primary",onClick:K},{default:t(()=>[...l[21]||(l[21]=[d("新增客户",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(q,{shadow:"never",style:{"margin-top":"16px"}},{default:t(()=>[se((L(),F(le,{data:M.value,stripe:""},{default:t(()=>[e(i,{prop:"name",label:"客户名称","min-width":"150"}),e(i,{prop:"shortName",label:"简称",width:"100"}),e(i,{prop:"type",label:"类型",width:"100"},{default:t(({row:a})=>[e(B,null,{default:t(()=>[d(y(a.type==="company"?"企业":"个人"),1)]),_:2},1024)]),_:1}),e(i,{prop:"contact",label:"联系人",width:"100"}),e(i,{prop:"phone",label:"联系电话",width:"130"}),e(i,{prop:"address",label:"地址","min-width":"200","show-overflow-tooltip":""}),e(i,{prop:"creditLimit",label:"信用额度",width:"120"},{default:t(({row:a})=>[d(" ¥"+y(a.creditLimit?.toLocaleString()||0),1)]),_:1}),e(i,{prop:"balance",label:"账户余额",width:"120"},{default:t(({row:a})=>[O("span",{class:re({"text-danger":a.balance<0})},"¥"+y(a.balance?.toLocaleString()||0),3)]),_:1}),e(i,{prop:"status",label:"状态",width:"80"},{default:t(({row:a})=>[e(B,{type:a.status==="active"?"success":"info"},{default:t(()=>[d(y(a.status==="active"?"正常":"停用"),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:b=>Q(a)},{default:t(()=>[...l[22]||(l[22]=[d("编辑",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"primary",onClick:b=>X(a)},{default:t(()=>[...l[23]||(l[23]=[d("价格",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"primary",onClick:b=>Z(a)},{default:t(()=>[...l[24]||(l[24]=[d("账单",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"danger",onClick:b=>ee(a)},{default:t(()=>[...l[25]||(l[25]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,R.value]]),e(te,{style:{"margin-top":"16px","justify-content":"flex-end"},"current-page":g.page,"onUpdate:currentPage":l[3]||(l[3]=a=>g.page=a),"page-size":g.size,"onUpdate:pageSize":l[4]||(l[4]=a=>g.size=a),total:g.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onCurrentChange:G,onSizeChange:H},null,8,["current-page","page-size","total"])]),_:1}),e(P,{modelValue:v.value,"onUpdate:modelValue":l[16]||(l[16]=a=>v.value=a),title:x.value?"编辑客户":"新增客户",width:"600"},{footer:t(()=>[e(u,{onClick:l[15]||(l[15]=a=>v.value=!1)},{default:t(()=>[...l[30]||(l[30]=[d("取消",-1)])]),_:1}),e(u,{type:"primary",loading:N.value,onClick:W},{default:t(()=>[...l[31]||(l[31]=[d("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(S,{model:o,rules:A,ref_key:"formRef",ref:E,"label-width":"100px"},{default:t(()=>[e(w,{gutter:20},{default:t(()=>[e(p,{span:12},{default:t(()=>[e(s,{label:"客户名称",prop:"name"},{default:t(()=>[e(f,{modelValue:o.name,"onUpdate:modelValue":l[5]||(l[5]=a=>o.name=a),placeholder:"请输入客户全称"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(s,{label:"简称",prop:"shortName"},{default:t(()=>[e(f,{modelValue:o.shortName,"onUpdate:modelValue":l[6]||(l[6]=a=>o.shortName=a),placeholder:"请输入简称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{gutter:20},{default:t(()=>[e(p,{span:12},{default:t(()=>[e(s,{label:"客户类型",prop:"type"},{default:t(()=>[e(D,{modelValue:o.type,"onUpdate:modelValue":l[7]||(l[7]=a=>o.type=a)},{default:t(()=>[e(C,{value:"company"},{default:t(()=>[...l[26]||(l[26]=[d("企业客户",-1)])]),_:1}),e(C,{value:"personal"},{default:t(()=>[...l[27]||(l[27]=[d("个人客户",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(s,{label:"价格类型",prop:"priceType"},{default:t(()=>[e(D,{modelValue:o.priceType,"onUpdate:modelValue":l[8]||(l[8]=a=>o.priceType=a)},{default:t(()=>[e(C,{value:"standard"},{default:t(()=>[...l[28]||(l[28]=[d("标准价",-1)])]),_:1}),e(C,{value:"contract"},{default:t(()=>[...l[29]||(l[29]=[d("协议价",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{gutter:20},{default:t(()=>[e(p,{span:12},{default:t(()=>[e(s,{label:"联系人",prop:"contact"},{default:t(()=>[e(f,{modelValue:o.contact,"onUpdate:modelValue":l[9]||(l[9]=a=>o.contact=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(s,{label:"联系电话",prop:"phone"},{default:t(()=>[e(f,{modelValue:o.phone,"onUpdate:modelValue":l[10]||(l[10]=a=>o.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"地址",prop:"address"},{default:t(()=>[e(f,{modelValue:o.address,"onUpdate:modelValue":l[11]||(l[11]=a=>o.address=a),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1}),e(w,{gutter:20},{default:t(()=>[e(p,{span:12},{default:t(()=>[e(s,{label:"信用额度"},{default:t(()=>[e(h,{modelValue:o.creditLimit,"onUpdate:modelValue":l[12]||(l[12]=a=>o.creditLimit=a),min:0,step:1e4,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(s,{label:"状态"},{default:t(()=>[e(ae,{modelValue:o.status,"onUpdate:modelValue":l[13]||(l[13]=a=>o.status=a),"active-value":"active","inactive-value":"inactive","active-text":"正常","inactive-text":"停用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"备注"},{default:t(()=>[e(f,{modelValue:o.remark,"onUpdate:modelValue":l[14]||(l[14]=a=>o.remark=a),type:"textarea",rows:2,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(P,{modelValue:_.value,"onUpdate:modelValue":l[18]||(l[18]=a=>_.value=a),title:"协议价格设置",width:"500"},{footer:t(()=>[e(u,{onClick:l[17]||(l[17]=a=>_.value=!1)},{default:t(()=>[...l[32]||(l[32]=[d("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:Y},{default:t(()=>[...l[33]||(l[33]=[d("保存",-1)])]),_:1})]),default:t(()=>[e(S,{"label-width":"100px"},{default:t(()=>[(L(!0),j(ie,null,pe(me(T),a=>(L(),F(s,{key:a.value,label:a.label},{default:t(()=>[e(h,{modelValue:z[a.value],"onUpdate:modelValue":b=>z[a.value]=b,min:0,precision:2,style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"]),O("span",_e,"标准价: ¥"+y(a.price),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1},8,["modelValue"])])}}}),xe=ce(ge,[["__scopeId","data-v-0eff96e8"]]);export{xe as default};
